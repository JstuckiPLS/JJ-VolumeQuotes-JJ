<div data-ng-controller="AddVendorBillController"  data-ng-init="init()">
    <div id="addEditVendorBillDlg" class="modalWidth12 modalHeight7 a_add_edit_vendor_bill_dialog" data-pls-modal="addEditVendorBillModel.showEditVendorBillDialog"
         data-options="addEditVendorBillModel.showEditVendorBillDialogOptions" data-close="closeEditVendorBill(true)">
        <div class="modal-header">
            <h4 data-ng-if="addEditVendorBillModel.vendorBill.id && !addEditVendorBillModel.readOnly">Edit Vendor Bill</h4>
            <h4 data-ng-if="!addEditVendorBillModel.vendorBill.id && !addEditVendorBillModel.readOnly">Add Vendor Bill</h4>
            <h4 data-ng-if="addEditVendorBillModel.readOnly">View Vendor Bill</h4>
        </div>
        <div class="modal-body" data-pls-input-cleaning>
            <div class="row-fluid">
                <div class="span4">
                    <form novalidate name="vendorBillForm">
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Carrier:</div>
                            <div class="span8" >
                                <input id="inputSCAC" class="span12" required data-ng-if="!addEditVendorBillModel.readOnly"
                                       data-pls-scac-search="addEditVendorBillModel.carrierTuple"/>
                                <span data-ng-if="addEditVendorBillModel.readOnly" data-ng-bind="addEditVendorBillModel.carrierTuple.name"></span>
                            </div>
                        </div>
                        <div class="row-fluid form-horizontal">
                            <span class="span4 text-right">Carrier ID:</span>
                            <span class="span8" data-ng-bind="addEditVendorBillModel.carrierTuple.id"></span>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">
                                Actual Pickup Date:
                            </div>
                            <div class="span8">
                                <div class="form-inline control-group">
                                    <label class="control-label input-small text-center" for="actPickupDate"><strong>{{parseISODate(addEditVendorBillModel.vendorBill.actualPickupDate) | date:'EEEE'}}</strong></label>
                                    <div class="input-append">
                                        <input name="dateField" type="text" id="actPickupDate" data-ng-disabled="addEditVendorBillModel.readOnly"
                                               data-ng-model="addEditVendorBillModel.vendorBill.actualPickupDate"
                                               data-pls-datepicker
                                               data-max-date="addEditVendorBillModel.vendorBill.actualDeliveryDate"
                                               class="input-small"/>
                                        <button type="button" class="btn" data-toggle="datepicker" data-ng-disabled="addEditVendorBillModel.readOnly">
                                            <i class="icon-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">
                                Est. Delivery Date:
                            </div>
                            <div class="span8">
                                <div class="form-inline control-group">
                                    <label class="control-label input-small text-center" for="estDeliveryDate"><strong>{{parseISODate(addEditVendorBillModel.vendorBill.estimatedDeliveryDate) | date:'EEEE'}}</strong></label>
                                    <div class="input-append">
                                        <input name="dateField" type="text" id="estDeliveryDate" data-ng-disabled="addEditVendorBillModel.readOnly"
                                               data-ng-model="addEditVendorBillModel.vendorBill.estimatedDeliveryDate"
                                               data-pls-datepicker
                                               class="input-small"/>
                                        <button type="button" class="btn" data-toggle="datepicker" data-ng-disabled="addEditVendorBillModel.readOnly">
                                            <i class="icon-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">
                                Actual Delivery Date:
                            </div>
                            <div class="span8">
                                <div class="form-inline control-group">
                                    <label class="control-label input-small text-center" for="actDeliveryDate"><strong>{{parseISODate(addEditVendorBillModel.vendorBill.actualDeliveryDate) | date:'EEEE'}}</strong></label>
                                    <div class="input-append">
                                        <input name="dateField" type="text" id="actDeliveryDate"
                                               data-ng-model="addEditVendorBillModel.vendorBill.actualDeliveryDate"
                                               data-min-date="addEditVendorBillModel.vendorBill.actualPickupDate"
                                               data-pls-datepicker
                                               class="input-small" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                                        <button type="button" class="btn" data-toggle="datepicker" data-ng-disabled="addEditVendorBillModel.readOnly">
                                            <i class="icon-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Vendor Bill #:</div>
                            <div class="span8" >
                                <input type="text" class="span12" data-ng-model="addEditVendorBillModel.vendorBill.vendorBillNumber"
                                        data-ng-disabled="addEditVendorBillModel.readOnly" maxlength="30"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">
                                Vendor Bill Date:
                            </div>
                            <div class="span8">
                                <div class="form-inline control-group">
                                    <label class="control-label input-small text-center" for="vendorBillDate"><strong>{{parseISODate(addEditVendorBillModel.vendorBill.vendorBillDate) | date:'EEEE'}}</strong></label>
                                    <div class="input-append">
                                        <input name="dateField" type="text" id="vendorBillDate" data-ng-disabled="addEditVendorBillModel.readOnly"
                                               data-ng-model="addEditVendorBillModel.vendorBill.vendorBillDate"
                                               data-pls-datepicker
                                               class="input-small"/>
                                        <button type="button" class="btn" data-toggle="datepicker" data-ng-disabled="addEditVendorBillModel.readOnly">
                                            <i class="icon-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid ">
                            <span class="span4 text-right">Amount:</span>
                            <span class="span8" data-ng-bind="addEditVendorBillModel.vendorBill.amount | plsCurrency"></span>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Pay Terms:</div>
                            <div class="span8" >
                                <select id="payTerm" class="span12 a_weightMeasure" data-ng-model="addEditVendorBillModel.vendorBill.payTerm" data-ng-disabled="addEditVendorBillModel.readOnly"
                                        data-ng-options="pt as pt | paymentTerms for pt in paymentTerms"></select>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Origin Name:</div>
                            <div class="span8" >
                                <input type="text" class="span12" data-ng-model="addEditVendorBillModel.vendorBill.originAddress.name" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">City, ST, ZIP:</div>
                            <div class="span8" >
                                <input class="span12" required data-ng-if="!addEditVendorBillModel.readOnly"
                                       data-pls-zip-search="addEditVendorBillModel.vendorBill.originAddress.zip" data-input-label-filter="zip"/>
                                <span data-ng-if="addEditVendorBillModel.readOnly" data-ng-bind="addEditVendorBillModel.vendorBill.originAddress.zip | zip"></span>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Origin Address:</div>
                            <div class="span8" >
                                <input type="text" class="span12" required data-ng-model="addEditVendorBillModel.vendorBill.originAddress.address1" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Destination Name:</div>
                            <div class="span8" >
                                <input type="text" class="span12" data-ng-model="addEditVendorBillModel.vendorBill.destinationAddress.name" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">City, ST, ZIP:</div>
                            <div class="span8" >
                                <input class="span12" required data-ng-if="!addEditVendorBillModel.readOnly"
                                       data-pls-zip-search="addEditVendorBillModel.vendorBill.destinationAddress.zip" data-input-label-filter="zip"/>
                                <span data-ng-if="addEditVendorBillModel.readOnly" data-ng-bind="addEditVendorBillModel.vendorBill.destinationAddress.zip | zip"></span>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Destination Address:</div>
                            <div class="span8" >
                                <input type="text" class="span12" required data-ng-model="addEditVendorBillModel.vendorBill.destinationAddress.address1" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">BOL:</div>
                            <div class="span8" >
                                <input type="text" class="span12" required data-ng-model="addEditVendorBillModel.vendorBill.bol" data-ng-disabled="addEditVendorBillModel.readOnly"  maxlength="25"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Pro#:</div>
                            <div class="span8" >
                                <input type="text" class="span12" required data-ng-model="addEditVendorBillModel.vendorBill.pro" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">PO #:</div>
                            <div class="span8" >
                                <input type="text" class="span12" required data-ng-model="addEditVendorBillModel.vendorBill.po" 
                                                                    data-ng-disabled="addEditVendorBillModel.readOnly"
                                                                    maxlength="50"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">PU #:</div>
                            <div class="span8" >
                                <input type="text" class="span12" required data-ng-model="addEditVendorBillModel.vendorBill.pu" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-right label-middle">Shipper Ref #:</div>
                            <div class="span8" >
                                <input type="text" class="span12" required data-ng-model="addEditVendorBillModel.vendorBill.quoteId" data-ng-disabled="addEditVendorBillModel.readOnly"/>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="span8">
                    <div class="row-fluid" data-ng-hide="hideControls">
                        <div class="span10 offset2 well well-small">
                            <form novalidate name="addLineItemForm">
                                <div class="row-fluid">
                                    <div class="span10">
                                        <label class="control-label span2 label-middle" for="product">Description:</label>
                                        <input id="product" class="span10 a_product" type="text" data-ng-model="lineItem.productDescription" required="" maxlength="1000" 
                                        data-ng-disabled="addEditVendorBillModel.readOnly || addEditVendorBillModel.vendorBill.lineItems.length >= maxCountOfProducts"/>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span10">
                                        <div class="span4">
                                            <label class="control-label span4 label-middle" for="qty">Qty:</label>
                                            <input id="qty" type="text" data-pls-number data-forbid-zero="true" class="span8 a_qty" data-ng-model="lineItem.quantity"
                                               data-ng-required="lineItem.packageType" data-ng-pattern="/^\d+$/" maxlength="6" 
                                               data-ng-disabled="addEditVendorBillModel.readOnly || addEditVendorBillModel.vendorBill.lineItems.length >= maxCountOfProducts"/>
                                        </div>
                                        <div class="span3">
                                            <label class="control-label span4 label-middle" for="commodityClass">Class:</label>
                                                <select id="commodityClass" class="span8 a_commodityClass" data-ng-model="lineItem.commodityClass" 
                                                    data-ng-disabled="addEditVendorBillModel.readOnly || addEditVendorBillModel.vendorBill.lineItems.length >= maxCountOfProducts"
                                                    data-ng-options="cc as cc | commodityClass for cc in commodityClasses" tabindex="4">
                                                <option value=""></option>
                                            </select>
                                        </div>
                                        <div class="span5">
                                            <label class="control-label span4 label-middle" for="vbWeight">Weight:</label>
                                            <input id="vbWeight" type="text" data-pls-number data-forbid-zero="true" class="span4 a_weight" data-ng-model="lineItem.weight"
                                               maxlength="13" tabindex="3" data-ng-disabled="addEditVendorBillModel.readOnly || addEditVendorBillModel.vendorBill.lineItems.length >= maxCountOfProducts" 
                                               data-integral="8" data-fractional="2"/>
                                            <select id="weightMeasure" class="span4 a_weightMeasure" data-ng-model="lineItem.weightUnit" 
                                            data-ng-options="wu as wu | weightMeasure for wu in weightUOM" data-ng-disabled="true"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span10">
                                        <div class="span7">
                                            <label class="control-label span4 label-middle" for="packageType">Pack. Type:</label>
                                            <select id="packageType" class="span8 a_packageType" data-ng-model="lineItem.packageType" 
                                            data-ng-disabled="addEditVendorBillModel.readOnly || addEditVendorBillModel.vendorBill.lineItems.length >= maxCountOfProducts"
                                                data-ng-options="t.code as t.label for t in packageTypes" data-ng-required="lineItem.quantity">
                                                <option value=""></option>
                                            </select>
                                        </div>
                                        <div class="span5">
                                            <label class="control-label span3 label-middle" for="nmfc">NMFC:</label>
                                            <input id="nmfc" class="span9 a_product" type="text" data-ng-model="lineItem.nmfc" 
                                            data-ng-disabled="addEditVendorBillModel.readOnly || addEditVendorBillModel.vendorBill.lineItems.length >= maxCountOfProducts" data-ng-maxlength="30"/>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span10 offset2">
                            <button type="button" class="btn span2 pull-left a_addItemButton" data-ng-disabled="addEditVendorBillModel.readOnly || addLineItemForm.$invalid || addEditVendorBillModel.vendorBill.lineItems.length >= maxCountOfProducts" data-ng-click="addLineItem()"><i class="icon-arrow-down"></i>Add</button>
                            <button type="button" class="btn span2 pull-left a_editButton" data-ng-disabled="addEditVendorBillModel.readOnly || _.isEmpty(addEditVendorBillModel.selectedLineItems)" data-ng-click="editLineItem()"><i class="icon-arrow-up"></i>Edit</button>
                            <button type="button" class="btn span2 pull-left a_removeButton" data-ng-disabled="addEditVendorBillModel.readOnly || _.isEmpty(addEditVendorBillModel.selectedLineItems)" data-ng-click="removeLimeItem()"><i class="icon-trash"></i>Remove</button>
                        </div>
                    </div>
                    <div class="row-fluid"><span>&nbsp;</span></div>
                    <div class="row-fluid">
                        <div class="gridStyle span12 gridHeight2" data-ng-grid="lineItemsGrid"></div>
                    </div>
                    <div class="row-fluid">
                        <div class="span9">
                           Total Weight: {{totals.weight | number}} lbs
                        </div>
                        <div class="span3 pls-margin-left-0">
                           Q-Ty: {{totals.quantity}}
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span3">
                            <strong>Line Items :</strong> {{addEditVendorBillModel.vendorBill.lineItems.length}} of {{maxCountOfProducts}}
                        </div>
                    </div>
                    <div class="row-fluid"><span>&nbsp;</span></div>
                    <div class="row-fluid">
                        <div class="span10 offset2 well well-small">
                            <div class="row-fluid">
                                <div class="span8">
                                    <label class="control-label span3 label-middle" for="accessorial">Accessorial:</label>
                                    <select id="accessorial" class="span9 a_accessorialRefCode" data-ng-model="costItem.refType"
                                            data-ng-options="acc.refType as acc.refType | refCodeAndDesc for acc in acceccorialsData">
                                        <option value=""></option>
                                    </select>

                                </div>
                                <div class="span4">
                                    <label class="control-label span3 label-middle" for="cost">Cost:</label>
                                    <input id="cost" class="span9 a_product" type="text" data-ng-model="costItem.subTotal" data-pls-number data-integral="8" data-fractional="2"/>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <button type="button" class="btn span2 pull-left a_addCostItemButton" data-ng-disabled="!costItem.refType || !costItem.subTotal" data-ng-click="addCostItem()"><i class="icon-arrow-down"></i>Add</button>
                                <button type="button" class="btn span2 pull-left a_editCostItemButton" data-ng-disabled="_.isEmpty(addEditVendorBillModel.selectedCostItems)" data-ng-click="editCostItem()"><i class="icon-arrow-up"></i>Edit</button>
                                <button type="button" class="btn span2 pull-left a_removeCostItemButton" data-ng-disabled="_.isEmpty(addEditVendorBillModel.selectedCostItems)" data-ng-click="removeCostItem()"><i class="icon-trash"></i>Remove</button>
                            </div>
                            <div class="row-fluid"><span>&nbsp;</span></div>
                            <div class="row-fluid">
                                <div class="gridStyle span12 gridHeight2" data-ng-grid="costItemsGrid"></div>
                            </div>
                            <div class="row-fluid"><span>&nbsp;</span></div>
                            <div class="row-fluid">
                                <div class="text-right">
                                    <strong>Total Cost:</strong> {{addEditVendorBillModel.vendorBill.amount | plsCurrency}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn" data-ng-if="!addEditVendorBillModel.readOnly" data-ng-click="closeEditVendorBill(true)">Cancel</button>
            <button type="button" class="btn btn-primary" data-ng-if="!addEditVendorBillModel.readOnly" data-ng-click="saveVendorBill()" data-ng-disabled="vendorBillForm.$invalid">Save</button>
            <button type="button" class="btn btn-primary" data-ng-if="addEditVendorBillModel.readOnly" data-ng-click="closeEditVendorBill(true)">OK</button>
        </div>
    </div>
</div>