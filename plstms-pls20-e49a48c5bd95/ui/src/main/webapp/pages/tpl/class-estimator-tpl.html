<div data-pls-modal="shouldBeOpen" data-close="close()" data-options="opts" class="modalWidth12" data-enter="ok()">
    <div class="modal-header">
        <h4>Class Estimator</h4>
    </div>
    <div class="modal-body">
        <div class="form-inline">
            <div class="row-fluid control-group">
                <form novalidate name="form" class="span5">
                    <div class="row-fluid controls-row" data-ng-if="canUseScaffoldingType || canUseCageBasketType">
                        <label class="span3" for="calculationType">Calculation type:</label>
	                    <select class="span7" name="calculationType" data-ng-model="estimCalcType.selected"
	                           data-ng-options="type as type for type in calcTypes.list"
	                           data-ng-focus="savePrevState()"
	                           data-ng-change="changeCalculationType()">
	                    </select>
                    </div>
                    <div class="row-fluid controls-row">
                        <label class="span3" for="classEstimatorQuantity{{$id}}">Quantity:</label>
                        <input data-ng-attr-id="classEstimatorQuantity{{$id}}" class="span2" type="text" data-ng-model="model.quantity"
                               data-pls-number data-required
                               data-forbid-zero="true" maxlength="6"
                               data-ng-disabled="isNotStandardCalculation()">
                    </div>
                    <div class="row-fluid controls-row">
                        <label class="span3" for="classEstimWeight{{$id}}">Total Weight:</label>
                        <input data-ng-attr-id="classEstimWeight{{$id}}" class="span6" type="text" data-pls-number data-integral="8"
                                data-fractional="2"
                                data-forbid-zero="true"
                                data-ng-disabled="isGridFilledForSpecialCalc()"
                                data-required
                                data-ng-model="model.weight" maxlength="11"/>
                        <select class="span3" data-ng-model="model.weightUnit" disabled
                                data-ng-options="value[0] as value[0] | weightMeasure for value in _.pairs(weightUnits)"></select>
                    </div>
                    <div class="row-fluid controls-row">
                        <label class="span3" for="length">Dimensions:</label>
                        <input class="span2" type="text" placeholder="LLL" data-pls-number data-integral="8"
                                data-fractional="2"
                                data-forbid-zero="true"
                                data-ng-disabled="isGridFilledForSpecialCalc()"
                                data-required
                                data-ng-model="model.length"
                                maxlength="11"/>
                        <input class="span2" type="text" placeholder="WWW" data-pls-number data-integral="8"
                                data-fractional="2"
                                data-forbid-zero="true"
                                data-ng-disabled="isGridFilledForSpecialCalc()"
                                data-required
                                data-ng-model="model.width"
                                maxlength="11"/>
                        <input class="span2" type="text" placeholder="HHH" data-pls-number data-integral="8"
                                data-fractional="2"
                                data-forbid-zero="true"
                                data-ng-disabled="isGridFilledForSpecialCalc()"
                                data-required
                                data-ng-model="model.height"
                                maxlength="11"/>
                        <select class="span3" data-ng-model="model.dimensionUnit" disabled
                            data-ng-options="value[0] as value[0] | dimensionsMeasure for value in _.pairs(dimensionUnits)"></select>
                    </div>
                    <div class="row-fluid">
                        <button type="button" class="btn span3 offset9"
                            data-ng-disabled="form.$invalid || isGridFilledForSpecialCalc()"
                            data-ng-click="addRow()">
                        Add &gt;
                        </button>
                    </div>
                </form>
                <div class="span6">
                     <div class="row-fluid">
                          <div class="gridStyle span12" data-ng-grid="gridOptions"></div>
                     </div>
                     <div class="row-fluid">
                         <div class="span8 offset4">
                            <div class="span2 pls-font-bold">Total:</div>
                            <div class="span2 text-right">{{totals.weight}}lbs</div>
                            <div class="span4 text-center">{{totals.cubicFeet}}</div>
                            <div class="span2 text-center">{{totals.PCF | number}}</div>
                            <div class="span2 text-center">{{totals.estimatedClass}}</div>
                         </div>
                    </div>
                </div>
                <div class="span1">
                    <div class="row-fluid">
                        <button type="button" class="btn btn-block" data-ng-disabled="!selectedItems.length" data-ng-click="deleteSelectedRows()">Delete</button>
                        <button type="button" class="btn btn-block" data-ng-disabled="!gridData.length" data-ng-click="clearGrid()">Clear</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn" data-ng-click="close()">
            Cancel
        </button>
        <button type="button" class="btn btn-primary" data-ng-disabled="gridData.length <= 0" data-ng-click="ok()">
            OK
        </button>
    </div>
</div>
