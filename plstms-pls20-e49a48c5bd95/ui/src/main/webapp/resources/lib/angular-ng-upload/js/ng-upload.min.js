angular.module("ngUpload",[]).directive("uploadSubmit",["$parse",function(a){return{restrict:"AC",link:function(b,c,d){var e={};e.enableControls=d.uploadOptionsEnableControls;var f=angular.element(c).parents("form"),g=a(d.uploadSubmit);if(!angular.isFunction(g)){var h="The expression on the ngUpload directive does not point to a valid function.";throw h+"\n"}c.bind("click",function(a){a&&(a.preventDefault=!0);var d=angular.element("<iframe id='upload_iframe' name='upload_iframe' border='0' width='0' height='0' style='width: 0px; height: 0px; border: none; display: none' />");d.bind("load",function(){var a=d.contents().find("body").text();b.$apply(function(){g(b,{content:a,completed:!0})}),""!==a&&setTimeout(function(){d.remove()},250),c.attr("disabled",null),c.attr("title","Click to start upload.")}),f.parent().append(d),b.$apply(function(){g(b,{content:"Please wait...",completed:!1})});var h=!0;e.enableControls||(c.attr("disabled","disabled"),h=!1),c.attr("title",(h?"[ENABLED]: ":"[DISABLED]: ")+"Uploading, please wait..."),f.submit()}).attr("title","Click to start upload.")}}}]).directive("ngUpload",["$parse",function(){return{restrict:"AC",link:function(a,b){b.attr("target","upload_iframe"),b.attr("method","post"),b.attr("action",b.attr("action")+"?_t="+(new Date).getTime()),b.attr("enctype","multipart/form-data"),b.attr("encoding","multipart/form-data")}}}]);